{% extends "base.html" %}
{% block content %}
<div class="max-w-2xl mx-auto h-[80vh] flex flex-col bg-slate-900 rounded-[2.5rem] border border-slate-800 overflow-hidden shadow-2xl">
    <div class="p-6 border-b border-slate-800 bg-slate-800/50 flex items-center gap-4">
        <a href="/matches" class="text-slate-400">â†</a>
        <h2 class="text-xl font-bold text-white">Chat with {{ receiver['username'] }}</h2>
    </div>

    <div class="flex-1 overflow-y-auto p-6 space-y-4 flex flex-col">
        {% for msg in messages %}
            <div class="max-w-[80%] p-4 rounded-2xl text-sm {{ 'bg-purple-600 self-end text-white rounded-tr-none' if msg['sender_id'] == session['user_id'] else 'bg-slate-800 self-start text-slate-200 rounded-tl-none border border-slate-700' }}">
                {{ msg['message'] }}
                <div class="text-[10px] mt-1 opacity-50">{{ msg['timestamp'] }}</div>
            </div>
        {% endfor %}
    </div>

    <form method="POST" class="p-4 bg-slate-800/50 border-t border-slate-800 flex gap-2">
        <input name="message" autocomplete="off" placeholder="Type a message..." 
               class="flex-1 bg-white text-slate-900 px-4 py-3 rounded-xl outline-none focus:ring-2 focus:ring-purple-500">
        <button class="bg-purple-600 px-6 py-3 rounded-xl font-bold hover:bg-purple-500 transition">Send</button>
    </form>
</div>
{% endblock %}