{% extends "base.html" %}
{% block content %}
<div class="max-w-2xl mx-auto w-full flex flex-col h-[80vh] bg-slate-900/50 backdrop-blur-xl border border-white/10 rounded-[30px] overflow-hidden shadow-2xl">
    
    <div class="p-6 border-b border-white/10 bg-slate-800/50 flex items-center gap-4">
        <div class="w-10 h-10 bg-purple-600 rounded-full flex items-center justify-center font-bold">
            {{ receiver['username'][0].upper() }}
        </div>
        <div>
            <h2 class="font-bold text-lg text-white">{{ receiver['username'] }}</h2>
            <span class="text-xs text-green-400">â— Online</span>
        </div>
    </div>

    <div class="flex-grow p-6 overflow-y-auto space-y-4 flex flex-col">
        {% for msg in messages %}
            {% if msg['sender_id'] == session['user_id'] %}
                <div class="self-end bg-purple-600 text-white px-4 py-2 rounded-2xl rounded-tr-none max-w-[80%] shadow-lg">
                    {{ msg['message'] }}
                </div>
            {% else %}
                <div class="self-start bg-slate-700 text-white px-4 py-2 rounded-2xl rounded-tl-none max-w-[80%] shadow-lg">
                    {{ msg['message'] }}
                </div>
            {% endif %}
        {% endfor %}
    </div>

    <form method="POST" class="p-4 bg-slate-800/50 border-t border-white/10 flex gap-3">
        <input type="text" name="message" placeholder="Type your message..." required
               class="flex-grow bg-black/40 border border-white/10 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-purple-500 transition">
        <button type="submit" class="bg-purple-600 hover:bg-purple-500 px-6 py-3 rounded-xl font-bold transition">
            Send
        </button>
    </form>
</div>
{% endblock %}